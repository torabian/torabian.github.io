import adcKeyboardLib from '@site/static/workshops/esp32-adc-keyboard/main/adc-keyboard.c';
import cmakeLists from '@site/static/workshops/esp32-adc-keyboard/main/CMakeLists.txt';
import esp32AdcKeyboard from '@site/static/workshops/esp32-adc-keyboard/main/esp32-adc-keyboard.c';

import CodeBlock from '@theme/CodeBlock'; 

# Building an ADC Keyboard on ESP32

In this workshop, we are going to implement a production level ADC keyboard using ESP32, and native development
kit - ESP IDF. Some knowledge can be transfered to Arduino, but this code works right away on ESP IDF 5 projects.

## What is AD Keyboard?

Ad keyboard is a 3 wire (GND, Input, Output) keypad system, often controlling 2 or more keys using the same wire.
The promise is simple, by placing resistors on the way of current, we make different voltages upon pressing any button.
Hence, by reading an analog gpio on a microcontroller, we can understand which key is pressed. This is interesting,
because allows you to consume single gpio for many keys, vs digital input that requires 1 pin per button.




## Challenges

During this experiment, I've realised few things:

- By default the keyboard I have is giving no resistence, so "unpressed" state is equal to 3.3v
- The keybaord I've got, makes a 0 value on left press. This is not perfect, because if minimal starting point was 300 (on 12Bit 
measurement, range is 0-4096), I could detect 0 as no physical keyboard connected.
- You need a lot of code, to simulate long press, also preventing duplicate press events.

Overall the workshop is simple. We are connecting an ESP dev board to AD Keyboard.

---------
### Download the workshop

<a href="/workshops/esp32-adc-keyboard.zip">esp32-adc-keyboard.zip</a>

-------

## Dependencies

You need to have such dependencies at least in your `CMakeLists.txt`:

<CodeBlock language="c" title="CMakeLists.txt">
  {cmakeLists}
</CodeBlock>


## Your main code:
<CodeBlock language="c" title="CMakeLists.txt">
  {esp32AdcKeyboard}
</CodeBlock>


## Library code.

Place this file alongside your project, it's kinda a library, for connecting AD Keyboard. I did not plan to publish
it, it's easier to just put the file per project and modify if needed, than managing a library. Place this next to your main
c file in esp idf.

<CodeBlock language="c" title="adc-keyboard.c">
  {adcKeyboardLib}
</CodeBlock>
